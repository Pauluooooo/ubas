<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>用户行为分析系统</title>
    <link rel="stylesheet" href="./css/http_unpkg.com_element-ui_lib_theme-chalk_index.css">
    <!-- 引入登录页 CSS 样式 -->
    <link rel="stylesheet" href="css/login.css">
</head>
<body>
<div id="app">
    <div class="container">
        <el-card class="card">
            <div class="logo">用户行为分析系统</div>
            <el-tabs v-model="activeTab">
                <el-tab-pane label="账号登录" name="login">
                    <el-form :model="form" label-position="top" label-width="500px">
                        <el-form-item label="用户名">
                            <el-input v-model="form.username" placeholder="请输入用户名"></el-input>
                        </el-form-item>
                        <el-form-item label="密码">
                            <el-input type="password" v-model="form.password" placeholder="请输入密码"></el-input>
                        </el-form-item>
                    </el-form>
                </el-tab-pane>
                <el-tab-pane label="手机号登录" name="phone">
                    <el-form :model="form" label-position="top" label-width="80px">
                        <el-form-item label="手机号">
                            <div class="phone-input-container">
                                <el-input v-model="form.phone" placeholder="请输入手机号"></el-input>
                                <el-button type="primary" @click="getCode" :disabled="countdown > 0" class="code-btn">{{
                                    countdown > 0 ? `${countdown} s` : '获取验证码' }}
                                </el-button>
                            </div>
                        </el-form-item>
                        <el-form-item label="验证码">
                            <el-input v-model="form.code" placeholder="请输入验证码"></el-input>
                        </el-form-item>
                    </el-form>
                </el-tab-pane>
                <el-tab-pane label="注册" name="register">
                    <el-form :model="form" label-position="top" label-width="80px">
                        <el-form-item label="用户名">
                            <el-input v-model="form.username" placeholder="请输入用户名"></el-input>
                        </el-form-item>
                        <el-form-item label="密码">
                            <el-input type="password" v-model="form.password" placeholder="请输入密码"></el-input>
                        </el-form-item>
                        <el-form-item label="确认密码">
                            <el-input type="password" v-model="form.confirmPassword"
                                      placeholder="请再次输入密码"></el-input>
                        </el-form-item>
                    </el-form>
                </el-tab-pane>
            </el-tabs>
            <div class="btn-box">
                <el-button type="primary" @click="submitForm">{{ buttonText }}</el-button>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <span v-show="activeTab === 'login'">没有账号？</span>
                <span v-show="activeTab === 'register'">已有账号？</span>
                <a href="#" @click.prevent="toggleTab">
                    <template v-if="activeTab === 'login'">
                        立即注册
                    </template>
                    <template v-if="activeTab === 'register'">
                        立即登录
                    </template>
                </a>
            </div>
        </el-card>
    </div>
</div>

<script src="./js/http_cdn.jsdelivr.net_npm_vue_dist_vue.js"></script>
<script src="./js/http_unpkg.com_axios_dist_axios.js"></script>
<script src="./js/http_unpkg.com_element-ui_lib_index.js"></script>
<script src="./js/http_unpkg.com_element-ui_lib_index.js"></script>

<script>
    new Vue({
        el: '#app',
        // 封装数据
        data() {
            return {
                activeTab: 'login', // 当前选中的标签页
                form: { // 表单数据
                    username: '',
                    password: '',
                    confirmPassword: '',
                    phone: '',
                    code: ''
                },
                countdown: 0, // 获取验证码倒计时
            };
        },
        // 按钮内容
        computed: {
            buttonText() {
                if (this.activeTab === 'login' || this.activeTab === 'phone') {
                    return '登录';
                } else {
                    return '注册';
                }
            }
        },
        // 方法
        methods: {
            // 切换页面底部文字
            toggleTab() {
                this.activeTab = this.activeTab === 'login' ? 'register' : 'login';
            },
            // 提交表单
            submitForm() {
                if (this.activeTab === 'register') {
                    // TODO 实现注册功能
                    console.log('注册');

                } else {
                    // TODO 实现登录功能
                    console.log('登录');

                }
            },
            // 发送验证码
            getCode() {
                if (this.countdown > 0) return;
                if (!/^1\d{10}$/.test(this.form.phone)) {
                    this.$message.error('请输入正确的手机号');
                    return;
                }
                // TODO 实现发送验证码功能
                console.log('发送验证码');
                // 验证码过期时间 单位：s
                this.countdown = 60;
                let countdownTimer = setInterval(() => {
                    this.countdown--;
                    if (this.countdown <= 0) {
                        clearInterval(countdownTimer);
                    }
                }, 1000);
            }
        }
    });
</script>
</body>
</html>